{"version":3,"sources":["../../src/libs/leaflet-heat.js"],"names":["t","i","_canvas","document","getElementById","_ctx","getContext","_width","width","_height","height","_max","clear","prototype","defaultRadius","defaultGradient","data","_data","max","add","push","radius","a","_circle","createElement","s","e","_r","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","beginPath","arc","Math","PI","closePath","fill","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","_grad","getImageData","draw","clearRect","length","globalAlpha","drawImage","n","_colorize","putImageData","window","simpleheat","L","HeatLayer","Layer","Class","extend","initialize","_latlngs","setOptions","setLatLngs","redraw","addLatLng","_heat","_updateOptions","_frame","_map","_animating","Util","requestAnimFrame","_redraw","onAdd","_initCanvas","options","pane","getPane","appendChild","_panes","overlayPane","on","_reset","zoomAnimation","Browser","any3d","_animateZoom","onRemove","removeChild","getPanes","off","addTo","addLayer","DomUtil","create","testProp","style","getSize","x","y","addClass","blur","containerPointToLayerPoint","setPosition","h","o","r","d","_","l","m","Bounds","point","c","u","maxZoom","getMaxZoom","f","pow","min","getZoom","g","p","v","_getMapPanePos","w","latLngToContainerPoint","contains","floor","alt","round","minOpacity","getZoomScale","zoom","_getCenterOffset","center","_multiplyBy","subtract","setTransform","TRANSFORM","getTranslateString","heatLayer"],"mappings":"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","file":"leaflet-heat.js","sourcesContent":["\"use strict\";!function(){function t(i){return this instanceof t?(this._canvas=i=\"string\"==typeof i?document.getElementById(i):i,this._ctx=i.getContext(\"2d\"),this._width=i.width,this._height=i.height,this._max=1,void this.clear()):new t(i)}t.prototype={defaultRadius:25,defaultGradient:{.4:\"blue\",.6:\"cyan\",.7:\"lime\",.8:\"yellow\",1:\"red\"},data:function(t,i){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,i){i=i||15;var a=this._circle=document.createElement(\"canvas\"),s=a.getContext(\"2d\"),e=this._r=t+i;return a.width=a.height=2*e,s.shadowOffsetX=s.shadowOffsetY=200,s.shadowBlur=i,s.shadowColor=\"black\",s.beginPath(),s.arc(e-200,e-200,t,0,2*Math.PI,!0),s.closePath(),s.fill(),this},gradient:function(t){var i=document.createElement(\"canvas\"),a=i.getContext(\"2d\"),s=a.createLinearGradient(0,0,0,256);i.width=1,i.height=256;for(var e in t)s.addColorStop(e,t[e]);return a.fillStyle=s,a.fillRect(0,0,1,256),this._grad=a.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var i=this._ctx;i.clearRect(0,0,this._width,this._height);for(var a,s=0,e=this._data.length;s<e;s++)a=this._data[s],i.globalAlpha=Math.max(a[2]/this._max,t||.05),i.drawImage(this._circle,a[0]-this._r,a[1]-this._r);var n=i.getImageData(0,0,this._width,this._height);return this._colorize(n.data,this._grad),i.putImageData(n,0,0),this},_colorize:function(t,i){for(var a,s=3,e=t.length;s<e;s+=4)a=4*t[s],a&&(t[s-3]=i[a],t[s-2]=i[a+1],t[s-1]=i[a+2])}},window.simpleheat=t}(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,i){this._latlngs=t,L.setOptions(this,i)},setLatLngs:function(t){return this._latlngs=t,this.redraw()},addLatLng:function(t){return this._latlngs.push(t),this.redraw()},setOptions:function(t){return L.setOptions(this,t),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),this.options.pane?this.getPane().appendChild(this._canvas):t._panes.overlayPane.appendChild(this._canvas),t.on(\"moveend\",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on(\"zoomanim\",this._animateZoom,this),this._reset()},onRemove:function(t){this.options.pane?this.getPane().removeChild(this._canvas):t.getPanes().overlayPane.removeChild(this._canvas),t.off(\"moveend\",this._reset,this),t.options.zoomAnimation&&t.off(\"zoomanim\",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},_initCanvas:function(){var t=this._canvas=L.DomUtil.create(\"canvas\",\"leaflet-heatmap-layer leaflet-layer\"),i=L.DomUtil.testProp([\"transformOrigin\",\"WebkitTransformOrigin\",\"msTransformOrigin\"]);t.style[i]=\"50% 50%\";var a=this._map.getSize();t.width=a.x,t.height=a.y;var s=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,\"leaflet-zoom-\"+(s?\"animated\":\"hide\")),this._heat=simpleheat(t),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t);var i=this._map.getSize();this._heat._width!==i.x&&(this._canvas.width=this._heat._width=i.x),this._heat._height!==i.y&&(this._canvas.height=this._heat._height=i.y),this._redraw()},_redraw:function(){if(this._map){var t,i,a,s,e,n,h,o,r,d=[],_=this._heat._r,l=this._map.getSize(),m=new L.Bounds(L.point([-_,-_]),l.add([_,_])),c=void 0===this.options.max?1:this.options.max,u=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,f=1/Math.pow(2,Math.max(0,Math.min(u-this._map.getZoom(),12))),g=_/2,p=[],v=this._map._getMapPanePos(),w=v.x%g,y=v.y%g;for(t=0,i=this._latlngs.length;t<i;t++)if(a=this._map.latLngToContainerPoint(this._latlngs[t]),m.contains(a)){e=Math.floor((a.x-w)/g)+2,n=Math.floor((a.y-y)/g)+2;var x=void 0!==this._latlngs[t].alt?this._latlngs[t].alt:void 0!==this._latlngs[t][2]?+this._latlngs[t][2]:1;r=x*f,p[n]=p[n]||[],s=p[n][e],s?(s[0]=(s[0]*s[2]+a.x*r)/(s[2]+r),s[1]=(s[1]*s[2]+a.y*r)/(s[2]+r),s[2]+=r):p[n][e]=[a.x,a.y,r]}for(t=0,i=p.length;t<i;t++)if(p[t])for(h=0,o=p[t].length;h<o;h++)s=p[t][h],s&&d.push([Math.round(s[0]),Math.round(s[1]),Math.min(s[2],c)]);this._heat.data(d).draw(this.options.minOpacity),this._frame=null}},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),a=this._map._getCenterOffset(t.center)._multiplyBy(-i).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,a,i):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(a)+\" scale(\"+i+\")\"}}),L.heatLayer=function(t,i){return new L.HeatLayer(t,i)};"]}